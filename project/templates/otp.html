<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="card fadeIn">
  <h2>Enter OTP</h2>

  {% if otp_available %}
      <p>OTP will expire in <span id="timer">05:00</span></p>
  {% endif %}

  <form method="POST">
      <input type="text" name="otp" placeholder="Enter OTP" required><br><br>
      <button type="submit" class="btn primary">Verify OTP</button>
  </form>

  {% if msg %}
  <p style="color:red;">{{ msg }}</p>
  {% endif %}
</div>

{% if otp_available %}
<script>
let timeLeft = 300;
function countdown() {
    let minutes = Math.floor(timeLeft / 60);
    let seconds = timeLeft % 60;

    seconds = seconds < 10 ? "0" + seconds : seconds;
    document.getElementById("timer").innerHTML = minutes + ":" + seconds;

    if (timeLeft <= 0) {
        window.location.href = "/enter-otp";
    }
    timeLeft -= 1;
}
setInterval(countdown, 1000);
</script>
{% endif %}

</body>
</html>
